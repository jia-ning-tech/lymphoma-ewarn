## Feature Importance

> Permutation importance (mean ΔAUC over repeats). SHAP is currently skipped due to model wrapper; we’ll add it in a later update.

### h=24 — val

![Feature importance — h24 val](outputs/figures/fi_forest_h24_val.png)

| Feature | SHAP mean(|v|) | Perm mean | Perm std |
|---|---:|---:|---:|
| `peep__24h__count` | 0 | 0.07928 | 0.00493 |
| `resp_rate__24h__count` | 0 | 0.02508 | 0.005872 |
| `dbp__24h__count` | 0 | 0.02164 | 0.004954 |
| `sbp__24h__count` | 0 | 0.02109 | 0.006683 |
| `heart_rate__24h__count` | 0 | 0.01949 | 0.006699 |
| `peep__6h__count` | 0 | 0.01846 | 0.00923 |
| `hco3__24h__max` | 0 | 0.01639 | 0.0008824 |
| `hco3__24h__min` | 0 | 0.01475 | 0.002699 |
| `spo2__24h__count` | 0 | 0.01462 | 0.002642 |
| `hco3__24h__mean` | 0 | 0.01456 | 0.001266 |
| `mbp__24h__count` | 0 | 0.01282 | 0.004102 |
| `na__24h__mean` | 0 | 0.01192 | 0.005376 |
| `na__24h__min` | 0 | 0.01178 | 0.002838 |
| `temperature__24h__count` | 0 | 0.01168 | 0.006277 |
| `cl__24h__mean` | 0 | 0.01126 | 0.003883 |
| `cl__24h__max` | 0 | 0.01015 | 0.002446 |
| `hco3__24h__std` | 0 | 0.009895 | 0.0009918 |
| `hco3__24h__last` | 0 | 0.009833 | 0.001481 |
| `dbp__24h__max` | 0 | 0.009586 | 0.002153 |
| `spo2__24h__mean` | 0 | 0.008913 | 0.004489 |
| `ph__24h__min` | 0 | 0.008771 | 0.001667 |
| `cl__24h__min` | 0 | 0.008396 | 0.004792 |
| `na__24h__max` | 0 | 0.007688 | 0.001911 |
| `sbp__24h__mean` | 0 | 0.007059 | 0.003111 |
| `resp_rate__6h__mean` | 0 | 0.006892 | 0.001447 |
| `pt__24h__min` | 0 | 0.006648 | 0.003267 |
| `paco2__24h__count` | 0 | 0.006499 | 0.002561 |
| `ca__24h__std` | 0 | 0.006216 | 0.003001 |
| `bun__24h__last` | 0 | 0.006181 | 0.001721 |
| `ast__24h__min` | 0 | 0.006004 | 0.001344 |

### h=24 — test

![Feature importance — h24 test](outputs/figures/fi_forest_h24_test.png)

| Feature | SHAP mean(|v|) | Perm mean | Perm std |
|---|---:|---:|---:|
| `peep__24h__count` | 0 | 0.04246 | 0.001544 |
| `cl__24h__mean` | 0 | 0.002614 | 0.0003388 |
| `peep__24h__std` | 0 | 0.002455 | 0.000476 |
| `dbp__24h__mean` | 0 | 0.002411 | 0.001164 |
| `cl__24h__min` | 0 | 0.002069 | 0.0009693 |
| `temperature__24h__mean` | 0 | 0.001911 | 0.0003508 |
| `heart_rate__6h__mean` | 0 | 0.001727 | 0.0003607 |
| `peep__24h__mean` | 0 | 0.001678 | 0.0005906 |
| `pt__24h__min` | 0 | 0.001651 | 0.0004012 |
| `lactate__24h__last` | 0 | 0.001599 | 0.0007041 |
| `spo2__24h__std` | 0 | 0.001533 | 0.0004582 |
| `na__6h__max` | 0 | 0.001309 | 0.0001175 |
| `peep__24h__max` | 0 | 0.001298 | 0.0007705 |
| `na__6h__mean` | 0 | 0.001294 | 0.0001718 |
| `heart_rate__24h__mean` | 0 | 0.001197 | 0.0005237 |
| `temperature__24h__max` | 0 | 0.001132 | 0.0007312 |
| `resp_rate__24h__std` | 0 | 0.001115 | 0.0001878 |
| `sbp__6h__min` | 0 | 0.001105 | 0.0002133 |
| `platelet__24h__mean` | 0 | 0.001064 | 0.0009 |
| `pao2__24h__min` | 0 | 0.001057 | 0.0001793 |
| `pt__24h__max` | 0 | 0.001051 | 0.0005049 |
| `pt__24h__count` | 0 | 0.001051 | 0.0003168 |
| `temperature__6h__mean` | 0 | 0.001006 | 0.0004093 |
| `hgb__24h__max` | 0 | 0.001005 | 0.0007186 |
| `temperature__6h__max` | 0 | 0.0009547 | 0.0002834 |
| `na__6h__last` | 0 | 0.0009298 | 0.0002553 |
| `ast__24h__min` | 0 | 0.0009032 | 0.0002437 |
| `temperature__24h__min` | 0 | 0.0008538 | 0.0003801 |
| `pao2__24h__count` | 0 | 0.0008472 | 0.000402 |
| `spo2__24h__mean` | 0 | 0.0008128 | 0.0003571 |

### h=48 — val

![Feature importance — h48 val](outputs/figures/fi_forest_h48_val.png)

| Feature | SHAP mean(|v|) | Perm mean | Perm std |
|---|---:|---:|---:|
| `peep__24h__count` | 0 | 0.08343 | 0.005845 |
| `heart_rate__24h__count` | 0 | 0.03088 | 0.006766 |
| `resp_rate__24h__count` | 0 | 0.02665 | 0.005176 |
| `peep__6h__count` | 0 | 0.02411 | 0.006487 |
| `sbp__24h__count` | 0 | 0.02174 | 0.005315 |
| `ph__24h__min` | 0 | 0.01863 | 0.002643 |
| `na__24h__mean` | 0 | 0.0181 | 0.006433 |
| `spo2__24h__count` | 0 | 0.01789 | 0.004075 |
| `dbp__24h__count` | 0 | 0.01697 | 0.0068 |
| `mbp__24h__count` | 0 | 0.01483 | 0.004724 |
| `ca__24h__max` | 0 | 0.01478 | 0.002772 |
| `na__24h__min` | 0 | 0.0142 | 0.003898 |
| `temperature__24h__count` | 0 | 0.0102 | 0.004465 |
| `peep__24h__std` | 0 | 0.008578 | 0.003938 |
| `hco3__24h__min` | 0 | 0.008265 | 0.0005924 |
| `spo2__24h__mean` | 0 | 0.008034 | 0.001454 |
| `cl__24h__mean` | 0 | 0.007907 | 0.002995 |
| `peep__24h__mean` | 0 | 0.007095 | 0.004926 |
| `peep__24h__max` | 0 | 0.006696 | 0.003615 |
| `cl__24h__min` | 0 | 0.006492 | 0.003203 |
| `dbp__24h__max` | 0 | 0.00612 | 0.002248 |
| `hco3__24h__mean` | 0 | 0.005862 | 0.001752 |
| `temperature__24h__std` | 0 | 0.005359 | 0.001976 |
| `hco3__24h__last` | 0 | 0.004946 | 0.0005831 |
| `na__24h__max` | 0 | 0.004925 | 0.001191 |
| `tbil__24h__min` | 0 | 0.004684 | 0.001447 |
| `hco3__24h__std` | 0 | 0.00443 | 0.001432 |
| `ca__24h__std` | 0 | 0.004422 | 0.0007148 |
| `ca__24h__last` | 0 | 0.004391 | 0.003688 |
| `sbp__24h__min` | 0 | 0.004312 | 0.001465 |

### h=48 — test

![Feature importance — h48 test](outputs/figures/fi_forest_h48_test.png)

| Feature | SHAP mean(|v|) | Perm mean | Perm std |
|---|---:|---:|---:|
| `peep__24h__count` | 0 | 0.1009 | 0.004593 |
| `resp_rate__24h__max` | 0 | 0.006406 | 0.001185 |
| `hgb__24h__min` | 0 | 0.00563 | 0.001115 |
| `temperature__24h__count` | 0 | 0.005203 | 0.001812 |
| `spo2__24h__mean` | 0 | 0.005052 | 0.001833 |
| `platelet__24h__min` | 0 | 0.005045 | 0.001258 |
| `bun__24h__max` | 0 | 0.004832 | 0.0009335 |
| `platelet__24h__max` | 0 | 0.004207 | 0.0007235 |
| `temperature__24h__mean` | 0 | 0.003677 | 0.0006452 |
| `peep__24h__std` | 0 | 0.00358 | 0.002238 |
| `resp_rate__24h__mean` | 0 | 0.003419 | 0.002229 |
| `ca__24h__mean` | 0 | 0.003402 | 0.002419 |
| `lactate__24h__mean` | 0 | 0.003025 | 0.000426 |
| `lactate__24h__last` | 0 | 0.002992 | 0.0007632 |
| `platelet__24h__mean` | 0 | 0.002978 | 0.001026 |
| `creatinine__24h__min` | 0 | 0.002944 | 0.0002814 |
| `temperature__24h__min` | 0 | 0.002834 | 0.0006255 |
| `spo2__24h__count` | 0 | 0.002716 | 0.001405 |
| `heart_rate__24h__count` | 0 | 0.002695 | 0.00281 |
| `platelet__24h__last` | 0 | 0.002429 | 0.001359 |
| `bun__24h__last` | 0 | 0.002401 | 0.0004126 |
| `ast__24h__min` | 0 | 0.002378 | 0.0004753 |
| `hgb__24h__last` | 0 | 0.002287 | 0.001217 |
| `tbil__24h__mean` | 0 | 0.002217 | 0.000745 |
| `creatinine__24h__max` | 0 | 0.002094 | 0.00113 |
| `mbp__6h__count` | 0 | 0.002011 | 0.0007844 |
| `sbp__6h__count` | 0 | 0.001904 | 0.0009976 |
| `lactate__24h__min` | 0 | 0.001846 | 0.0006691 |
| `bun__24h__min` | 0 | 0.001819 | 0.000645 |
| `temperature__24h__std` | 0 | 0.001681 | 0.0003407 |
